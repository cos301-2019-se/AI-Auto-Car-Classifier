<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>color classifier</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.0.0/dist/tf.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/p5.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/addons/p5.dom.min.js"></script>
	<script src="neuralNetwork.js" type="text/javascript"></script>

</head>
<body >    
		<form><input type="file" id="fileUpload"></form>
        <canvas id="canvas" width="512" height="512">
</canvas>

<script>
    function drawImage(canvasCtx, imageSrc) {
    var img = new Image();
    img.onload = function() {
        canvasCtx.drawImage(img, 0, 0, 512, 512);
    };
    img.src = imageSrc;
}

function drawPoint(canvasCtx, x, y) {
    canvasCtx.beginPath();
    canvasCtx.fillStyle = 'black';
    canvasCtx.arc(x, y, 5, 0, 2 * Math.PI);
    canvasCtx.fill();
}

function loadFile(canvasCtx, files) {
    if (files && files[0]) {
        var reader = new FileReader();
        reader.onload = function() {
            drawImage(canvasCtx, reader.result);
        };
        reader.readAsDataURL(files[0]);
    }
}


var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');
var fileUpload = document.getElementById('fileUpload');

fileUpload.onchange = function fileUploadChanged() {
    loadFile(ctx, this.files);
}

var imgData;

canvas.onclick = function canvasClicked(event) {
        var x = event.pageX - this.offsetLeft;
        var y = event.pageY - this.offsetTop;
    //    alert("X Coordinate: " + x + " Y Coordinate: " + y);
        //imgData = ctx.getImageData(x,y,ctx.width,ctx.height);
        console.log(x);
        console.log(y);

        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        console.log(ctx.width);
        console.log(ctx.height);
        imgData = ctx.getImageData(x,y,5112,512);
        red = imgData.data[0];
        green = imgData.data[1];
        blue = imgData.data[2];
        alpha = imgData.data[3];
        console.log('values: '+red+', '+green+', '+blue+', '+alpha);
};
</script>

<p><strong>Note:</strong> The canvas tag is not supported in Internet 
Explorer 8 and earlier versions.</p>
</body>
</html>
